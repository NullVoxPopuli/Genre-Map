<style type="text/css">
  table th, table td{
    padding: 0 5px;
  }
</style>

<br />
<br />
<h1>Listing genres</h1>
<%= text_field_tag "search_genres", nil, :placeholder => "Too lazy to scroll.." %>
<%= text_field_tag "super_genres_filter", nil, :placeholder => "Super Genre Filter.." %>

<table class="genres">
  <tr>
    <th>Name</th>
    <th>SuperGenre</th>
    <th>Has Origins?</th>
    <th>Has Children?</th>
    <th>Wikipedia?</th>
    <th></th>
  </tr>

<% @genres.each do |genre| %>
  <tr>
    <td class="name"><%= link_to 'Edit', edit_genre_path(genre) %> | <%= link_to genre.name, genre %></td>
    <td class="super_genre"><%= genre.super_genre.name if genre.super_genre %></td>
    <td><%= genre.stylistic_origin_ids.size > 0 %> </td>
    <td><%= genre.child_ids.size > 0 %> </td>
    <td><%= genre.wikipedia %> </td>
    <td><%= link_to 'Destroy', genre, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Genre', new_genre_path %>

<script type="text/javascript">
    // $("#search_available_origins").unbind("keyup input paste");
    $("#search_genres").bind("keyup input paste", function(){
        var search_text = $(this).val().toUpperCase();
        $(".genres .name").parent().hide().filter(function(){
            return $(this).find(".name").text().toUpperCase().indexOf(search_text) != -1
        }).show();
      return false;     
    });
    $("#super_genres_filter").bind("keyup input paste", function(){
        var search_text = $(this).val().toUpperCase();
        $(".genres .super_genre").parent().hide().filter(function(){
            return $(this).find(".super_genre").text().toUpperCase().indexOf(search_text) != -1
        }).show();
      return false;     
    });
</script>